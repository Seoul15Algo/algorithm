## 백준 16724 - 피리 부는 사나이

***

### 구현 목표
성우가 피리를 불면 회원들은 성우가 정해놓은 방향대로 움직이기 시작한다. 성우가 정해놓은 방향은 총 4가지이며 각각 위, 아래, 왼쪽, 오른쪽으로 이동하게 한다. 단, 지도 밖으로 나가도록 설정된 경우는 없다.

이대로 놔둔다면 회원들은 끊임없이 움직여야 하기 때문에 피리 소리가 들리지 않는 SAFE ZONE을 만들어 회원들을 구해주려 한다. 

최소한의 SAFE ZONE을 설치하여 회원들을 구해야 한다.

***

### 풀이 방식

지도 밖으로 향하도록 설정된 칸은 없기 때문에 결국 싸이클이 발생할 수 밖에 없는 구조를 갖고 있다.

최소한의 SAFE ZONE을 설치하려면, 싸이클 하나당 한 개의 SAFE ZONE을 배치하면 된다.

1. 방향을 쉽게 판단하기 위해 지도를 입력 받을 때 기존의 문자형이 아닌, 정수형으로 바꿔서 입력 받는다.
2. 방문하지 않은 구역에 대하여 해당 구역에서부터 형성되는 싸이클을 모두 체크하여 방문 처리해주고, SAFE ZONE의 개수를 1 늘린다.
3. 이번 차수에 진입하여 방문한 곳은 -2로, 이미 싸이클 생성이 완료된 곳은 -1로 기록하여 구분하여준다.

``` Java
private static int findLoop(int r, int c, int d) {		
		if(map[r][c] == -1) {	// 이미 싸이클이 생성된 구간이랑 이어진다면
			return -1;		// 새 안전구역 생성할 필요 없이 기존 싸이클에 포함
		}
		
		if(map[r][c] == -2) {	// 이번 탐색에서 지나온 칸과 이어진다면
			result++;		// 즉, 새 싸이클이 생성된다면 안전구역 하나 생성
			return -1;
		}
		
		map[r][c] = -2;		// 이번 탐색에서 방문했다는 표시
		int nr = r+dr[d];
		int nc = c+dc[d];
		count++;	// 지금까지 탐색 완료한 칸의 개수
		
		return map[r][c] = findLoop(nr, nc, map[nr][nc]);	// 이번 칸이 가르키는 방향으로 이어서 탐색 진행
	}
```